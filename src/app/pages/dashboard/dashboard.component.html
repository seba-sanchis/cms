<div class="main-panel">
  <div class="row-card">
    <div class="basic-card">
      <div class="item-title">Ventas</div>
      <div class="item-subtitle">Valor promedio por orden</div>
      <div class="metric-value">
        {{ averageOrderValue | number : "1.2-2" | currency }}
      </div>

      <hr class="divider" />

      <div class="item-subtitle">Total recaudado</div>
      <div class="metric-value">{{ totalSales | currency }}</div>
    </div>
    <div class="basic-card">
      <div class="item-title">Estadísticas</div>
      <div class="item-subtitle">Clientes registrados</div>
      <div class="metric-value">{{ totalUsers }}</div>

      <hr class="divider" />

      <div class="item-subtitle">Carritos abandonados</div>
      <div class="metric-value">{{ bagAbandonment }}</div>

      <hr class="divider" />

      <div class="item-subtitle">Total de órdenes</div>
      <div class="metric-value">{{ orders.length }}</div>
    </div>
    <div class="basic-card">
      <div>
        <div class="item-title">Tasa de conversión</div>
        <svg
          class="circular-chart"
          width="100"
          height="100"
          viewBox="0 0 100 100"
        >
          <circle class="circle-background" cx="50" cy="50" r="45"></circle>
          <circle
            class="circle-progress"
            cx="50"
            cy="50"
            r="45"
            [style.stroke-dasharray]="calculateDashArray(conversionRate)"
          ></circle>
          <text
            x="50"
            y="50"
            text-anchor="middle"
            dy="0.3em"
            class="percentage"
          >
            {{ conversionRate | percent }}
          </text>
        </svg>
      </div>
      <div>
        <div class="item-title">Tasa de abandono</div>
        <svg
          class="circular-chart"
          width="100"
          height="100"
          viewBox="0 0 100 100"
        >
          <circle class="circle-background" cx="50" cy="50" r="45"></circle>
          <circle
            class="circle-progress"
            cx="50"
            cy="50"
            r="45"
            [style.stroke-dasharray]="calculateDashArray(bagAbandonmentRate)"
          ></circle>
          <text
            x="50"
            y="50"
            text-anchor="middle"
            dy="0.3em"
            class="percentage"
          >
            {{ bagAbandonmentRate | percent }}
          </text>
        </svg>
      </div>
    </div>
  </div>

  <div class="row-card">
    <div class="basic-card">
      <div class="item-title">Los más vendidos</div>
      <ul class="metrics-section">
        @for (bestSeller of bestSellers; track $index) {
        <li class="metric-row">
          <div class="metric-title">{{ bestSeller.name }}</div>
          <div class="metric-value">{{ bestSeller.totalSoldQuantity }}</div>
        </li>
        }
      </ul>
    </div>

    <div class="basic-card">
      <div class="item-title">Estado del inventario</div>

      <ul class="metrics-section">
        @for (lowStockProduct of lowStockProducts; track $index) {
        <li class="metric-row">
          <span class="metric-title">{{ lowStockProduct.name }}</span>
          <span class="metric-value">{{ lowStockProduct.remainingStock }}</span>
        </li>
        }
      </ul>
    </div>

    <div class="basic-card">
      <div class="item-title">Ventas por región</div>
      <ul class="metrics-section">
        @for (regionSale of regionSales.entries(); track $index) {
        <li class="metric-row">
          <span class="metric-title">{{ regionSale[0] }}</span>
          <span class="metric-value">{{ regionSale[1] }}</span>
        </li>
        }
      </ul>
    </div>
  </div>
</div>
